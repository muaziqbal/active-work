
# This Gemfile modification was generated by the `rake prepare` command
#
class GemfileHelper
  def self.parse_active_workflow_agent_gems(dependencies)
    base_path = File.expand_path('../../../', __FILE__)
    gemspec = Dir["#{base_path}/*.gemspec"].first
    previous_gems = Hash[dependencies.map { |dep| [dep.name, dep] }]
    Gem::Specification.load(gemspec).development_dependencies.each do |args|
      previous_gem = previous_gems[args.name]
      if previous_gem
        abort "Gem #{args.to_s} in #{gemspec} conflicts with active_workflow/Gemfile" unless previous_gem.match?(args.to_spec)
      else
        yield args.name, *args.requirements_list
      end
    end
  end
end

GemfileHelper.parse_active_workflow_agent_gems(dependencies) do |args|
  gem *args
end
